class t{constructor(t,n,r){"string"==typeof n||e(n)?(r=[n],n={}):Array.isArray(n)&&(r=n,n={}),n=n||{},r=r?Array.isArray(r)?r:[r]:[],this.tagName=t,this.ref=null,this.mark=[],this.attrs=n,this.children=r}}function e(e){return e instanceof t}function n(e,n,r){return new t(e,n,r)}const r=window.Proxy?new Proxy({},{get:(e,n)=>(e.hasOwnProperty(n)||(e[n]=function(e,r){return new t(n,e,r)}),e[n])}):function(){const e={};return"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,let,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot".split(",").forEach((n=>{e[n.slice(0,1).toUpperCase()+n.slice(1)]=function(e,r){return new t(n,e,r)}})),e}(),[o,i,s]=["warn","error","info","log"].map((t=>(...e)=>console[t](...e)));function u(...t){return function(...e){t.forEach((t=>t.call(this,...e)))}}function a(t,e){if(!c(t))throw new TypeError(e||"Parameter must be a function.")}function c(t){return"function"==typeof t}class l extends t{constructor(t,e,n,r){super(t,e,n),this.const=r,this.templet=null,this.vNode=null,this.parentNode=null,this.getter=null,this.mouted=null,this.update=null,this.unMouted=null}}function f(t){return t instanceof l}function h(t){return a(t),function(...t){const e=Symbol("Component");return function(n,r){return new l(e,n,r,...t)}}(t)}class d{constructor(t,e){a(t),this.request=t,this.response=e,this.wants=new Set}emit(){this.wants.forEach((t=>t()))}unbind(t){this.wants.has(t)&&this.wants.delete(t)}createBranch(t){a(t);const e=()=>{this.request(r,r.from)},n=t=>{c(this.response)?this.response(t,r.from):o("The store has no function to receive this parameter")};function r(e){t(e)}return r.from=function(){return{receiver:t,want:e,send:n}},this.wants.add(e),[e,n]}}function p(...t){return new d(...t)}function m(){return function t(e){t.current=e}}const w=new Map;w.set(/[a-zA-Z]+/,{ref:function(t,e){a(e,"The ref parameter must be a function"),e(t.ref)},on:function(t,e){let n=t.ref;for(let t in e)n.addEventListener(t,e[t])},class:function(t,e){var n=t.ref;if("string"===typeof e)n.classList=e;else{let t=[];if(Array.isArray(e))t=e;else for(let n in e)e[n]&&t.push(n);n.classList=t.join(" ")}}});const b=function(t){var e=function(...n){var r=e.cache,o=n.join(",");return Object.hasOwnProperty.call(r,o)||(r[o]=t.apply(this,n)),r[o]};return e.cache={},e}((function(t,e){for(let[n,r]of w.entries())if(n.test(t)&&r[e])return r[e];return!1}));function g(t,e,n){const r=t.tagName;let o=b(r,e);return!!o&&(o(t,n),!0)}const y={current:null};function v(t){let e=y.current;if(!e)throw new Error(t||"hooks must be called inside Component");return e}const N=[];function A({timestamp:t,component:e}){let n=e.vNode,r=T(e),o=x.call(r);e.vNode=r,e.parentNode.replaceChild(o,e.ref),e.ref=o,C(n,"unMouted"),E(e,"update"),C(r,"mouted")}function C(t,n){let r=null;f(t)?(r=[t.vNode],c(t[n])&&t[n]()):r=t.children,r.forEach((t=>{e(t)&&C(t,n)}))}function E(t,e){f(t)&&c(t[e])&&t[e]()}function k(t,n){if(f(t))M.call(t,n);else{if(!e(t))throw new Error("The root element must mount the component.");x.call(t,n)}}function x(t){let{tagName:n,attrs:r,children:o}=this;const i=this.ref=document.createElement(n);for(let t in r){const e=r[t];g(this,t,e)||("boolean"==typeof e?i[t]=e:/on[A-Z][a-zA-Z]+/.test(t)?(a(e),i[t.toLowerCase()]=r[t]):i.setAttribute(t,e))}for(let t of o)if("function"==typeof t&&(t=t()),null!=t&&""!==t)if(e(t))f(t)?M.call(t,i):x.call(t,i);else{let e=document.createTextNode(String(t));i.appendChild(e)}return t&&t.appendChild(i),i}function M(t){if(this.parentNode=t,null===this.templet){y.current=this;let t={props:this.attrs,slot:this.children};a(this.templet=this.const(t),"Creating a component must return a function that returns the virtual node"),y.current=null}let n=this.vNode=T(this);e(n)?(this.ref=x.call(n,t),E(this,"mouted")):i("Creating a component must return a function that returns the virtual node")}function T(t){if(t.templet)return t.getter?t.templet(t.getter()):t.templet()}function q(t){let e=v(),n=t;function r(){return n}return e.getter&&o("This component has registered the useChapter method, which will cause the previous method to be invalid."),e.getter=r,[r,function(t){var r;n=t,r=e,1===N.push({timestamp:+new Date,component:r})&&requestAnimationFrame((function(){for(;N.length;)A(N.shift())}))}]}function P(t){a(t);let e=v();e.mouted=e.mouted?u(e.mouted,t):t}function j(t){a(t);let e=v();e.update=e.update?u(e.update,t):t}function L(t){a(t);let e=v();e.unMouted=e.unMouted?u(e.unMouted,t):t}export{r as TAG,h as createComponent,n as createElement,m as createRef,p as createStore,k as renderDOM,q as useChapter,P as useMouted,L as useUnMouted,j as useUpdate};
