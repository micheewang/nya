class t{constructor(t,n,r){"string"==typeof n||e(n)?(r=[n],n={}):Array.isArray(n)&&(r=n,n={}),n=n||{},r=r?Array.isArray(r)?r:[r]:[],this.tagName=t,this.ref=null,this.mark=[],this.attrs=n,this.children=r}}function e(e){return e instanceof t}function n(e,n,r){return new t(e,n,r)}const r=window.Proxy?new Proxy({},{get:(e,n)=>(e.hasOwnProperty(n)||(e[n]=function(e,r){return new t(n,e,r)}),e[n])}):function(){const e={};return"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,let,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot".split(",").forEach((n=>{e[n.slice(0,1).toUpperCase()+n.slice(1)]=function(e,r){return new t(n,e,r)}})),e}(),[o,i,u]=["warn","error","info","log"].map((t=>(...e)=>console[t](...e)));function s(...t){return function(...e){t.forEach((t=>t.call(this,...e)))}}function a(){}function c(t,e){if(!l(t))throw new TypeError(e||"Parameter must be a function.")}function l(t){return"function"==typeof t}class f extends t{constructor(t,e,n,r){super(t,e,n),this.const=r,this.templet=null,this.vNode=null,this.parentNode=null,this.getter=null,this.mouted=null,this.update=null,this.unMouted=null}}function h(t){return t instanceof f}function d(t){return c(t),function(...t){const e=Symbol("Component");return function(n,r){return new f(e,n,r,...t)}}(t)}class p{constructor(t,e){c(t),this.responder=t,this.recipient=e||a,this.wants=new Set}emit(){this.wants.forEach((t=>t()))}unbind(t){this.wants.has(t)&&this.wants.delete(t)}createTruck(t){c(t);let e=(...e)=>{this.responder((e=>{t(e)}),...e)};return this.wants.add(e),[e,t=>this.recipient(t)]}}function m(...t){return new p(...t)}function w(){return function t(e){t.current=e}}const b=new Map;b.set(/[a-zA-Z]+/,{ref:function(t,e){c(e,"The ref parameter must be a function"),e(t.ref)},on:function(t,e){let n=t.ref;for(let t in e)n.addEventListener(t,e[t])},class:function(t,e){var n=t.ref;if("string"===typeof e)n.classList=e;else{let t=[];if(Array.isArray(e))t=e;else for(let n in e)e[n]&&t.push(n);n.classList=t.join(" ")}}});const g=function(t){var e=function(...n){var r=e.cache,o=n.join(",");return Object.hasOwnProperty.call(r,o)||(r[o]=t.apply(this,n)),r[o]};return e.cache={},e}((function(t,e){for(let[n,r]of b.entries())if(n.test(t)&&r[e])return r[e];return!1}));function y(t,e,n){const r=t.tagName;let o=g(r,e);return!!o&&(o(t,n),!0)}const v={current:null};function N(t){let e=v.current;if(!e)throw new Error(t||"hooks must be called inside Component");return e}const A=[];function C({timestamp:t,component:e}){let n=e.vNode,r=P(e),o=M.call(r);e.vNode=r,e.parentNode.replaceChild(o,e.ref),e.ref=o,E(n,"unMouted"),k(e,"update"),E(r,"mouted")}function E(t,n){let r=null;h(t)?(r=[t.vNode],l(t[n])&&t[n]()):r=t.children,r.forEach((t=>{e(t)&&E(t,n)}))}function k(t,e){h(t)&&l(t[e])&&t[e]()}function x(t,n){if(h(t))T.call(t,n);else{if(!e(t))throw new Error("The root element must mount the component.");M.call(t,n)}}function M(t){let{tagName:n,attrs:r,children:o}=this;const i=this.ref=document.createElement(n);for(let t in r){const e=r[t];y(this,t,e)||("boolean"==typeof e?i[t]=e:/on[A-Z][a-zA-Z]+/.test(t)?(c(e),i[t.toLowerCase()]=r[t]):i.setAttribute(t,e))}for(let t of o)if("function"==typeof t&&(t=t()),null!=t&&""!==t)if(e(t))h(t)?T.call(t,i):M.call(t,i);else{let e=document.createTextNode(String(t));i.appendChild(e)}return t&&t.appendChild(i),i}function T(t){if(this.parentNode=t,null===this.templet){v.current=this;let t={props:this.attrs,slot:this.children};c(this.templet=this.const(t),"Creating a component must return a function that returns the virtual node"),v.current=null}let n=this.vNode=P(this);e(n)?(this.ref=M.call(n,t),k(this,"mouted")):i("Creating a component must return a function that returns the virtual node")}function P(t){if(t.templet)return t.getter?t.templet(t.getter()):t.templet()}function j(t){let e=N(),n=t;function r(){return n}return e.getter&&o("This component has registered the useChapter method, which will cause the previous method to be invalid."),e.getter=r,[r,function(t){var r;n=t,r=e,1===A.push({timestamp:+new Date,component:r})&&requestAnimationFrame((function(){for(;A.length;)C(A.shift())}))}]}function L(t){c(t);let e=N();e.mouted=e.mouted?s(e.mouted,t):t}function q(t){c(t);let e=N();e.update=e.update?s(e.update,t):t}function O(t){c(t);let e=N();e.unMouted=e.unMouted?s(e.unMouted,t):t}export{r as TAG,d as createComponent,n as createElement,w as createRef,m as createStore,x as renderDOM,j as useChapter,L as useMouted,O as useUnMouted,q as useUpdate};
