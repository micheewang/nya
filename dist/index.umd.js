!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).nya={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function a(t,e,n){return(a=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw i}}}}var h=function t(e,r,o){n(this,t),"string"==typeof r||d(r)?(o=[r],r={}):Array.isArray(r)&&(o=r,r={}),r=r||{},o=o?Array.isArray(o)?o:[o]:[],this.tagName=e,this.ref=null,this.mark=[],this.attrs=r,this.children=o};function d(t){return t instanceof h}var y,m=window.Proxy?new Proxy({},{get:function(t,e){return t.hasOwnProperty(e)||(t[e]=function(t,n){return new h(e,t,n)}),t[e]}}):(y={},"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,let,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot".split(",").forEach((function(t){y[t.slice(0,1).toUpperCase()+t.slice(1)]=function(e,n){return new h(t,e,n)}})),y),v=f(["warn","error","info","log"].map((function(t){return function(){var e;return(e=console)[t].apply(e,arguments)}})),3),b=v[0],w=v[1];function g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e.forEach((function(e){return e.call.apply(e,[t].concat(r))}))}}function A(t,e){if(!S(t))throw new TypeError(e||"Parameter must be a function.")}function S(t){return"function"==typeof t}v[2];var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(f,t);var e,r,a=(e=f,r=u(),function(){var t,n=o(e);if(r){var i=o(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return c(this,t)});function f(t,e,r,o){var i;return n(this,f),(i=a.call(this,t,e,r)).const=o,i.templet=null,i.vNode=null,i.parentNode=null,i.getter=null,i.mouted=null,i.update=null,i.unMouted=null,i}return f}(h);function j(t){return t instanceof O}var E=function(){function t(e,r){n(this,t),A(e),this.request=e,this.response=r,this.wants=new Set}var e,o,i;return e=t,(o=[{key:"emit",value:function(){this.wants.forEach((function(t){return t()}))}},{key:"unbind",value:function(t){this.wants.has(t)&&this.wants.delete(t)}},{key:"createBranch",value:function(t){var e=this;A(t);var n=function(){e.request(o,o.from)},r=function(t){S(e.response)?e.response(t,o.from):b("The store has no function to receive this parameter")};function o(e){t(e)}return o.from=function(){return{receiver:t,want:n,send:r}},this.wants.add(n),[n,r]}}])&&r(e.prototype,o),i&&r(e,i),t}();var C=new Map;C.set(/[a-zA-Z]+/,{ref:function(t,e){A(e,"The ref parameter must be a function"),e(t.ref)},on:function(t,e){var n=t.ref;for(var r in e)n.addEventListener(r,e[r])},class:function(t,n){var r=t.ref;if("string"===e(n))r.classList=n;else{var o=[];if(Array.isArray(n))o=n;else for(var i in n)n[i]&&o.push(i);r.classList=o.join(" ")}}});var T=function(t){var e=function e(){for(var n=e.cache,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var u=o.join(",");return Object.hasOwnProperty.call(n,u)||(n[u]=t.apply(this,o)),n[u]};return e.cache={},e}((function(t,e){var n,r=p(C.entries());try{for(r.s();!(n=r.n()).done;){var o=f(n.value,2),i=o[0],u=o[1];if(i.test(t)&&u[e])return u[e]}}catch(t){r.e(t)}finally{r.f()}return!1}));function N(t,e,n){var r=t.tagName,o=T(r,e);return!!o&&(o(t,n),!0)}var P={current:null};function k(t){var e=P.current;if(!e)throw new Error(t||"hooks must be called inside Component");return e}var x=[];function M(t){t.timestamp;var e=t.component,n=e.vNode,r=L(e),o=q.call(r);e.vNode=r,e.parentNode.replaceChild(o,e.ref),e.ref=o,_(n,"unMouted"),R(e,"update"),_(r,"mouted")}function _(t,e){var n=null;j(t)?(n=[t.vNode],S(t[e])&&t[e]()):n=t.children,n.forEach((function(t){d(t)&&_(t,e)}))}function R(t,e){j(t)&&S(t[e])&&t[e]()}function q(t){var e=this.tagName,n=this.attrs,r=this.children,o=this.ref=document.createElement(e);for(var i in n){var u=n[i];N(this,i,u)||("boolean"==typeof u?o[i]=u:/on[A-Z][a-zA-Z]+/.test(i)?(A(u),o[i.toLowerCase()]=n[i]):o.setAttribute(i,u))}var a,c=p(r);try{for(c.s();!(a=c.n()).done;){var f=a.value;if("function"==typeof f&&(f=f()),null!=f&&""!==f)if(d(f))j(f)?I.call(f,o):q.call(f,o);else{var l=document.createTextNode(String(f));o.appendChild(l)}}}catch(t){c.e(t)}finally{c.f()}return t&&t.appendChild(o),o}function I(t){if(this.parentNode=t,null===this.templet){P.current=this;var e={props:this.attrs,slot:this.children};A(this.templet=this.const(e),"Creating a component must return a function that returns the virtual node"),P.current=null}var n=this.vNode=L(this);d(n)?(this.ref=q.call(n,t),R(this,"mouted")):w("Creating a component must return a function that returns the virtual node")}function L(t){if(t.templet)return t.getter?t.templet(t.getter()):t.templet()}t.TAG=m,t.createComponent=function(t){return A(t),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Symbol("Component");return function(t,n){return a(O,[r,t,n].concat(e))}}(t)},t.createElement=function(t,e,n){return new h(t,e,n)},t.createRef=function(){return function t(e){t.current=e}},t.createStore=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return a(E,e)},t.renderDOM=function(t,e){if(j(t))I.call(t,e);else{if(!d(t))throw new Error("The root element must mount the component.");q.call(t,e)}},t.useChapter=function(t){var e=k(),n=t;function r(){return n}return e.getter&&b("This component has registered the useChapter method, which will cause the previous method to be invalid."),e.getter=r,[r,function(t){var r;n=t,r=e,1===x.push({timestamp:+new Date,component:r})&&requestAnimationFrame((function(){for(;x.length;)M(x.shift())}))}]},t.useMouted=function(t){A(t);var e=k();e.mouted=e.mouted?g(e.mouted,t):t},t.useUnMouted=function(t){A(t);var e=k();e.unMouted=e.unMouted?g(e.unMouted,t):t},t.useUpdate=function(t){A(t);var e=k();e.update=e.update?g(e.update,t):t},Object.defineProperty(t,"__esModule",{value:!0})}));
