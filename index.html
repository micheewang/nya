<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>nya</title>
  </head>

  <body>
    <div id="root"></div>
  </body>
  <script>
    console.log(nya);
    const { TAG, createComponent, renderDOM, useChapter } = nya;

    let { Div } = TAG;

    let size = 0;
    let goods = {
      get class() {
        return 'class' + size++;
      },
    };

    //extends
    let Component1 = createComponent(() => {
      let [value, setValue] = useChapter({ class: 'class', title: 'no title' });
      return ({ slot, props }) =>
        Div({ class: value.class, title: value.title }, [
          Div('this is the ' + value.class + ' children.'),
          slot[0],
          slot[1],
          slot[2],
        ]);
    });

    let Component2 = createComponent(() => {
      let data = goods;
      return ({ slot }) => Div(['this is', slot[0], data.class, ' component2']);
    });

    // string slot | props | element slot
    let demo2 = Div({ title: 'outer-div' }, [
      Component1(
        {
          title: 'test props',
        },
        [
          'test string slot',
          Div('test element slot Component2'),
          Component2(' slot'),
        ]
      ),
      Component2(' normal'),
    ]);

    renderDOM(demo2, document.getElementById('root'));
  </script>
  <script>
    // test truck
    var truck = nya.createTruck();
    //set
    truck.setAnswer(function (name) {
      setTimeout(() => {
        this.send({ goods: 'goods' });
      }, 2000);
    });

    ///get
    var get = truck.get;
    truck.setReceive(function (goods) {
      console.log(goods);
    });
  </script>
</html>
